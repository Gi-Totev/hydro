import{j as e,x as _,r as o,y as b,u as A,A as S}from"./components-gtVk4ANr.js";import{I as x}from"./Image-CkDhqclR.js";import{M as V}from"./Money-BidXu4eo.js";import{A as w}from"./AddToCartButton-CTUwitKT.js";import"./index-DIWb1Ox1.js";const I="/api-adjacent-variants",L="/assets/hero-BQnvA97M.avif";function D(){return e.jsx("section",{className:"hero",children:e.jsxs("div",{className:"hero__inner",children:[e.jsx("div",{className:"hero__image",children:e.jsx(x,{src:L,sizes:"100vw",loading:"eager"})}),e.jsxs("div",{className:"hero__content",children:[e.jsx("h1",{className:"hero__title",children:"Discover the Best Deals Every Day"}),e.jsx("p",{className:"hero__subtitle",children:"Shop the latest trends and essentials at unbeatable prices. Your one-stop shop for everything you need."}),e.jsx("div",{className:"hero__actions",children:e.jsx("a",{href:"/collections/all",className:"button",children:"Shop Now"})})]})]})})}const E="/assets/hero-MpFysigB.css";function F({product:s}){const t=_({key:`card-${s.id}`}),[i,f]=o.useState(s.selectedOrFirstAvailableVariant),[l,M]=o.useState(s.options),[m,v]=o.useState(s.adjacentVariants),[g,h]=o.useState(!1),[u,j]=o.useState(null);o.useEffect(()=>{var n,a,d,r;if((n=t.data)!=null&&n.error)return j(t.data.error);if((r=(d=(a=t.data)==null?void 0:a.data)==null?void 0:d.product)!=null&&r.adjacentVariants){const c=t.data.data.product.adjacentVariants;JSON.stringify(c)!==JSON.stringify(m)&&v(c)}},[t.data]),o.useEffect(()=>{t.errors&&j("Failed to fetch variant data. Please try again.")},[t.errors]);const y=async n=>{if(g)return;h(!0);const a=new FormData;a.append("productId",s.id),a.append("selectedOptions",JSON.stringify(Object.values(n))),await t.submit(a,{method:"post",action:I}),h(!1)},N=async n=>{const a=n.target,d=a.getAttribute("js-index"),r={...i.selectedOptions,[d]:{...i.selectedOptions[d],value:a.selectedOptions[0].getAttribute("js-name")}},c=m.find(O=>Object.keys(r).every(p=>r[p].value==O.selectedOptions[p].value));await y(r),c&&f(c)};return e.jsxs("div",{className:"recommended-product",children:[e.jsx(x,{data:s.images.nodes[0],aspectRatio:"1/1",sizes:"(min-width: 45em) 20vw, 50vw"}),e.jsx("h4",{children:e.jsx(b,{to:`/products/${s.handle}`,dangerouslySetInnerHTML:{__html:s.title}})}),u&&e.jsx("p",{children:u}),Object.keys(l).length>0&&e.jsx(t.Form,{method:"post",children:Object.entries(l).map(([n,a])=>e.jsx("select",{id:`${s.handle}-${a.name}`,"js-index":n,onChange:N,defaultValue:i.selectedOptions[n].value,children:Object.entries(a.optionValues).map(([d,r])=>e.jsx("option",{value:r.id,"js-name":r.name,dangerouslySetInnerHTML:{__html:r.name}},"option"+d))},"select"+n))}),e.jsx("small",{children:e.jsx(V,{data:i.price})}),e.jsx(w,{lines:[{merchandiseId:i.id,quantity:1}],children:"Add To Cart"})]},s.id)}function B(){return[{rel:"stylesheet",href:E}]}const J=()=>[{title:"HHH"}];function $(){const s=A();return e.jsxs("div",{className:"home",children:[e.jsx(D,{}),e.jsx(H,{products:s.recommendedProducts})]})}function H({products:s}){return e.jsxs("div",{className:"recommended-products",children:[e.jsx("h2",{children:"Recommended Products"}),e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(S,{resolve:s,children:t=>e.jsx("div",{className:"recommended-products-grid",children:t?t.products.nodes.map(i=>e.jsx(F,{product:i},i.id)):null})})}),e.jsx("br",{})]})}export{$ as default,B as links,J as meta};
